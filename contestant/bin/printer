#! /bin/sh
#
# Display the status of the printer
#
# File:		lpq
# Author:	Bob Walton <walton@deas.harvard.edu>
# Date:		Mon Nov 13 10:04:48 EST 2000
#
# The authors have placed this program in the public
# domain; they make no warranty and accept no liability
# for this program.
#
# RCS Info (may not be true date or author):
#
#   $Author: hc3 $
#   $Date: 2000/11/13 15:14:43 $
#   $RCSfile: printer,v $
#   $Revision: 1.5 $

case "$1" in
   -* )
   	echo "
lpq

    Display the staus of the printer.

    If ~/.hpcm_contest/printer is readable the name of
    the printer is read from this file.

    If ~/.hpcm_contest/printer_jobs is readable the
    last few lines of this file are displayed."

    	exit 1
	;;
esac

# Compute printer.
#
if test -r ${HOME}/.hpcm_contest/printer
then
    PRINTER=`cat ${HOME}/.hpcm_contest/printer`
fi

# If printer_jobs is readable, display its last
# 10 lines.
#
if test -r ${HOME}/.hpcm_contest/printer_jobs
then
    echo ==================== \
	 Recent Printer Jobs \
	 ====================
    tail -10 ${HOME}/.hpcm_contest/printer_jobs
    echo ==================== \
	 =================== \
	 ====================
fi

# Display lpq -l accounting lines.
#
if test -x /bin/lpq
then
    /bin/lpq -l -P$PRINTER | grep accounting
elif test -x /usr/bin/lpq
then
    /usr/bin/lpq -l -P$PRINTER | grep accounting
fi

exit 0
