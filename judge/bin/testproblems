#! /bin/sh
#
# Test problem code.
#
# File:		testproblems
# Author:	Bob Walton <walton@deas.harvard.edu>
# Date:		Fri Oct 19 05:57:07 EDT 2001
#
# The authors have placed this program in the public
# domain; they make no warranty and accept no liability
# for this program.
#
# RCS Info (may not be true date or author):
#
#   $Author: hc3 $
#   $Date: 2001/10/19 10:16:30 $
#   $RCSfile: testproblems,v $
#   $Revision: 1.4 $

case "$1" in
    "" | -* )
	    echo "
testproblems directory ...

    							
    This program runs:

    		make clean
		make
		diff *.out *.test
		make clean

    in each directory.  It saves the diff outputs in
    addition to outputting them, and then plays back
    the saved output at the end of this program's
    execution"

	    exit 1
	    ;;
esac

tmp=/tmp/testproblems$$

trap "rm -f $tmp" 0
echo >$tmp

for x in "$@"
do
    echo "========== $x:" >>$tmp
    (cd $x; make clean; \
            make; \
	    diff *.out *.test | tee -a $tmp; \
	    make clean)
done

cat $tmp

exit 0
