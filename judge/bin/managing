#!/bin/sh
#
# Make manager's managing document.
#
# File:		managing
# Author:	Bob Walton (walton@deas.harvard.edu)
# Date:		Thu Mar 31 12:00:15 EDT 2011
#
# The authors have placed this program in the public
# domain; they make no warranty and accept no liability
# for this program.
#
# RCS Info (may not be true date or author):
#
#   $Author: walton $
#   $Date: 2011/03/31 16:01:24 $
#   $RCSfile: managing,v $
#   $Revision: 1.2 $
#
# The next lines start tclsh \
trap "echo judging: Terminated by Signal" \
    HUP INT QUIT; \
tclsh "$0" "$@"; exit $status

# Include common code and parameters:
#
set lib_directory "[file dirname $argv0]/../lib"
set log_disable yes
source $lib_directory/judging_common.tcl
catch {

puts "
		     HPCM Managing
		     ---- --------

	Division of Responsibility
	Account Control Files
	Contest/Facility Parameters
	Making the Contest Description
	Making the Contest Web Page
	Allocating Accounts
	Changing the Problem Set


Division of Responsibility
-------- -- --------------

This document describes what a contest/facility manager
needs to know in a situation in which a judging account
is shared between a contest/facility manager, who
maintains a particular contest or practice facility, and
a software manager, who makes new contests/facilites,
manages the HPCM program code, and provides other
services, such as backup.

The contest/facility manager of a contest or practice
facility named nnnn has responsibility for the existence
and contents of all directories and files with names of
the forms:

	~/*_nnnn_*
	~/*_nnnn

Included are the contest judging directory with a name
of the form

	~/judging_nnnn_*

and the contest directory named

	~/contest_nnnn

However, the software manager, and not the contest/
facility manager, will make initial versions of these
last two directories, and then the contest/facility
manager will assume responsibility for them.  Thus the
contest/facility manager does not need to make contests
or facilities, but only maintain them.

The software manager has responsibility for the exis-
tence and contents of all other files, with a few
exceptions documented in `Account Control Files' below,
and.  In particular, the software manager is responsible
for the program files in ~/hpcm.

Account Control Files
------- ------- -----

The software manager is responsible for ~/.bashrc, but
upon request will add to its end code to read files
with names of the form

	~/.bashrc_nnnn

where nnnn is the name of a contest/facility.  See the
end of the ~/.bashrc file to see if this is already
enabled.

Any manager may add, modify, or delete their own line(s)
to

	~/.ssh/authorized_keys
	~/.ssh/known_hosts

(the latter is modified semi-automatically).  Notify the
software manager when changes are made to

	~/.ssh/authorized_keys

so a backup may be kept (typically this is kept in
~/.ssh/RCS/authorized_keys,v).

Contest/Facility Parameters
---------------- ----------

The parameters for a contest/facility named nnnn are in
the file:

    ~/judging_nnnn_*/hpcm_judging.rc

The first parts of this file contain parameters that
must be particularized for the contest/facility, and
these parts must be read and edited by the contest/
facility manager.

After changing parameters, `make' should be run by
executing:

    cd ~/judging_nnnn_*
    make

so that the new parameter settings will take effect.

There are some more detailed notes on some of the para-
meters that need to be set in the following sections.

Making the Contest Description
------ --- ------- -----------

The contest description is made in the file

    ~/judging_nnnn_*/help/this_contest

and automatically copied from there (by `make' and
`makecontest') to the file

    ~/contest_nnnn/help/this_contest

and to the web pages file

    ~/judging_nnnn_*/web/this_contest

Contestants/Students can access this file from local
accounts by executing `help', and if there is a web
page, this file is the `description' part of the web
page.

Normally you can just compute this file using `make' by
setting the hpcm_judging.rc parameters:

	this_contest_prefix
	this_contest_postfix

These parameters can be edited, and `make' can be
executed to recompute the file.  However, you can also
edit the file

    ~/judging_nnnn_*/help/this_contest

directly.  Once you have edited this file directly,
further runs of `make' will not change the file, but
will copy the most recent edited version to

    ~/contest_nnnn/help/this_contest
and ~/judging_nnnn_*/web/this_contest

So in the future you will have to maintain the file
strictly by editing it.


Making the Contest Web Page
------ --- ------- --- ----

Allocating Accounts
---------- --------

Changing the Problem Set
-------- --- ------- ---

"

exit 0

# Include common error catching code:
#
} caught_output
caught_error

