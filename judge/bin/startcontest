#!/bin/sh
#
# Start the contest by setting permissions on files.
#
# File:		startcontest
# Author:	Bob Walton (walton@deas.harvard.edu)
# Date:		Mon Mar 25 15:21:08 EST 2002
#
# The authors have placed this program in the public
# domain; they make no warranty and accept no liability
# for this program.
#
# RCS Info (may not be true date or author):
#
#   $Author: hc3 $
#   $Date: 2002/03/25 20:23:28 $
#   $RCSfile: startcontest,v $
#   $Revision: 1.3 $
#
# The next line starts tcl \
exec tcl "$0" "$@"

# Use tcl rather than tclsh so that `signal' is defined.

# Include common code and parameters:
#
set lib_directory "[file dirname $argv0]/../lib"
source $lib_directory/judging_common.tcl
set log_mode none
catch {

set document "
startcontest

    This program merely sets a+rx permissions on the
    directory 

    	<judging_directory>/contest/problems
	
    and a+r permissions on the file
    
    	<judging_directory>/contest/help/problems
	
    if these exist.
    
    Unlike most HPCM judging programs, errors made by
    this program are not written to log files, but are
    announced on standard error."


# If there are any arguments print documentation and
# exit with error.
#
if { $argc > 0 } {
    puts $document
    exit 1
}

if { [file isdirectory $contest_directory/problems] } {
    grant_access $contest_directory/problems
}

if { [file isfile $contest_directory/help/problems] } {
    grant_access $contest_directory/help/problems
}

exit 0

# Include common error catching code:
#
} caught_output
caught_error
